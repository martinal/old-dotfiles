# This file has been copied from the i3 keycodes based file and manually edited.
# It will not be overwritten, so edit it as you like.
#
#
#
#

# i3 config file (v4)
#
# Please see https://i3wm.org/docs/userguide.html for a complete reference!

set $mod Mod4

# Font for window titles. Will also be used by the bar unless a different font
# is used in the bar {} block below.
#font pango:monospace 10

# This font is widely installed, provides lots of unicode glyphs, right-to-left
# text rendering and scalability on retina/hidpi displays (thanks to pango).
font pango:DejaVu Sans Mono 20

# Before i3 v4.8, we used to recommend this one as the default:
# font -misc-fixed-medium-r-normal--13-120-75-75-C-70-iso10646-1
# The font above is very space-efficient, that is, it looks good, sharp and
# clear in small sizes. However, its unicode glyph coverage is limited, the old
# X core fonts rendering does not support right-to-left and this being a bitmap
# font, it doesn’t scale on retina/hidpi displays.

# Use Mouse+$mod to drag floating windows to their wanted position
floating_modifier $mod

# Start i3bar to display a workspace bar
# (plus the system information i3status finds out, if available)
bar {
    position bottom
    status_command i3status

    font pango:DejaVu Sans Mono 12
    separator_symbol "║"

    # Default colors
#   colors {
#       background #000000
#       statusline #ffffff
#       separator #666666
#       # <colorclass> <border> <background> <text>
#       focused_workspace  #4c7899 #285577 #ffffff
#       active_workspace   #333333 #5f676a #ffffff
#       inactive_workspace #333333 #222222 #888888
#       urgent_workspace   #2f343a #900000 #ffffff
#       binding_mode       #2f343a #900000 #ffffff
#   }

    # Custom colors
#   colors {
#       background #111111
#       statusline #eeeeee
#       separator #0044aa
#       # <colorclass> <border> <background> <text>
#       focused_workspace  #0044aa #0044aa #ffffff
#       active_workspace   #0044aa #003388 #888888
#       inactive_workspace #0044aa #222222 #888888
#       urgent_workspace   #0044aa #771018 #888888
#       binding_mode       #0044aa #083a08 #ffffff
#   }

    # Darkula colors:
    colors {
        background #282A36
        statusline #F8F8F2
        separator  #44475A
        # <colorclass> <border> <background> <text>
        focused_workspace  #44475A #44475A #F8F8F2
        active_workspace   #282A36 #44475A #F8F8F2
        inactive_workspace #282A36 #282A36 #BFBFBF
        urgent_workspace   #FF5555 #FF5555 #F8F8F2
        binding_mode       #FF5555 #FF5555 #F8F8F2
    }

    # Hide by default, shows when holding Mod4 (Win)
    #mode hide
    #hidden_state hide
    #modifier Mod4

    # Disable scroll wheel switches workspace
    bindsym button4 nop
    bindsym button5 nop
}

# start a terminal
bindsym $mod+Return exec i3-sensible-terminal
bindsym $mod+Shift+Return exec --no-startup-id zsh

# kill focused window
bindsym $mod+Shift+q kill

# Start dmenu any-path menu with Darkula colors
bindsym $mod+d exec "dmenu_run -nf '#F7F8F2' -nb '#282A36' -sb '#6272A4' -sf '#F8F8F2' -fn 'monospace-12' -p 'Path search -❯' -l 10"

# Start dmenu .desktop app menu with Darkula colors
bindsym $mod+Shift+d exec --no-startup-id i3-dmenu-desktop --dmenu="dmenu_run -i -nf '#F7F8F2' -nb '#282A36' -sb '#6272A4' -sf '#F8F8F2' -fn 'monospace-12' -p 'Desktop apps search -❯' -l 10"

# change focus (j,k,l,;)
bindcode $mod+44 focus left
bindcode $mod+45 focus down
bindcode $mod+46 focus up
bindcode $mod+47 focus right

# alternatively, you can use the cursor keys:
bindcode $mod+113 focus left
bindcode $mod+116 focus down
bindcode $mod+111 focus up
bindcode $mod+114 focus right

# move focused window (j,k,l,;)
bindcode $mod+Shift+44 move left
bindcode $mod+Shift+45 move down
bindcode $mod+Shift+46 move up
bindcode $mod+Shift+47 move right

# alternatively, you can use the cursor keys:
bindcode $mod+Shift+113 move left
bindcode $mod+Shift+116 move down
bindcode $mod+Shift+111 move up
bindcode $mod+Shift+114 move right

# split in horizontal orientation
bindsym $mod+h split h

# split in vertical orientation
bindsym $mod+v split v

# enter fullscreen mode for the focused container
bindsym $mod+f fullscreen toggle

# change container layout (stacked, tabbed, toggle split)
bindsym $mod+s layout stacking
bindsym $mod+w layout tabbed
bindsym $mod+e layout toggle split

# toggle tiling / floating
bindsym $mod+Shift+space floating toggle

# change focus between tiling / floating windows
bindsym $mod+space focus mode_toggle

# TODO: Floating mode
# focus mode_toggle
# floating toggle
# sticky toggle
# move position center
# resize set 640 480 px, move position center
# resize set 1720 960 px, move position center

# focus the parent container
bindsym $mod+a focus parent

# focus the child container
bindsym $mod+p focus child

# switch to workspace (1=10,9=19)
bindsym $mod+1 workspace 1
bindsym $mod+2 workspace 2
bindsym $mod+3 workspace 3
bindsym $mod+4 workspace 4
bindsym $mod+5 workspace 5
bindsym $mod+6 workspace 6
bindsym $mod+7 workspace 7
bindsym $mod+8 workspace 8
bindsym $mod+9 workspace 9
bindsym $mod+0 workspace 10

# move focused container to workspace
bindsym $mod+Shift+1 move container to workspace 1
bindsym $mod+Shift+2 move container to workspace 2
bindsym $mod+Shift+3 move container to workspace 3
bindsym $mod+Shift+4 move container to workspace 4
bindsym $mod+Shift+5 move container to workspace 5
bindsym $mod+Shift+6 move container to workspace 6
bindsym $mod+Shift+7 move container to workspace 7
bindsym $mod+Shift+8 move container to workspace 8
bindsym $mod+Shift+9 move container to workspace 9
bindsym $mod+Shift+0 move container to workspace 10

# reload the configuration file
bindsym $mod+Shift+c reload
# restart i3 inplace (preserves your layout/session, can be used to upgrade i3)
bindsym $mod+Shift+r restart
# exit i3 (logs you out of your X session)
bindsym $mod+Shift+e exec "i3-nagbar -t warning -m 'You pressed the exit shortcut. Do you really want to exit i3? This will end your X session.' -b 'Yes, exit i3' 'i3-msg exit'"


# Switch workspace
set $mode_workspaces Switch workspace: a...;  |  Move window to workspace: q...p  |  (enter or escape to close)
mode "$mode_workspaces" {
    # switch to workspace (1=10,9=19)
    bindsym a workspace 1, mode "default"
    bindsym s workspace 2, mode "default"
    bindsym d workspace 3, mode "default"
    bindsym f workspace 4, mode "default"
    bindsym g workspace 5, mode "default"
    bindsym h workspace 6, mode "default"
    bindsym j workspace 7, mode "default"
    bindsym k workspace 8, mode "default"
    bindsym l workspace 9, mode "default"
    bindcode 47 workspace 10, mode "default"
 
    # move focused container to workspace
    bindsym q move container to workspace 1, mode "default"
    bindsym w move container to workspace 2, mode "default"
    bindsym e move container to workspace 3, mode "default"
    bindsym r move container to workspace 4, mode "default"
    bindsym t move container to workspace 5, mode "default"
    bindsym y move container to workspace 6, mode "default"
    bindsym u move container to workspace 7, mode "default"
    bindsym i move container to workspace 8, mode "default"
    bindsym o move container to workspace 9, mode "default"
    bindsym p move container to workspace 10, mode "default"

    # move focused container to workspace and follow
    bindsym z move container to workspace 1,  workspace 1,  mode "default"
    bindsym x move container to workspace 2,  workspace 2,  mode "default"
    bindsym c move container to workspace 3,  workspace 3,  mode "default"
    bindsym v move container to workspace 4,  workspace 4,  mode "default"
    bindsym b move container to workspace 5,  workspace 5,  mode "default"
    bindsym n move container to workspace 6,  workspace 6,  mode "default"
    bindsym m move container to workspace 7,  workspace 7,  mode "default"
    #bindsym , move container to workspace 8,  workspace 8,  mode "default"
    #bindsym . move container to workspace 9,  workspace 9,  mode "default"
    #bindsym / move container to workspace 10, workspace 10, mode "default"

    # back to normal: Enter or Escape
    bindsym Return mode "default"
    bindsym Escape mode "default"
}

# Mark window
set $mode_mark [M]ark, [A]dd, [R]eplace, [T]oggle, [U]nmark, [G]oto, [F]etch, [S]wap: <letter> | (enter or escape to close)
mode "$mode_mark" {
    # Read 1 char mark and apply to the current window
    bindsym m exec i3-input -F 'mark %s' -l 1 -P 'Mark: ', mode "default"

    # Read 1 char mark and add to the current window
    bindsym a exec i3-input -F 'mark --add %s' -l 1 -P 'Add mark: ', mode "default"

    # Read 1 char mark and replace mark on the current window
    bindsym r exec i3-input -F 'mark --replace %s' -l 1 -P 'Replace mark: ', mode "default"

    # Read 1 char mark and toggle mark on the current window
    bindsym t exec i3-input -F 'mark --toggle %s' -l 1 -P 'Toggle mark: ', mode "default"

    # Read 1 char mark and unmark it from all windows
    bindsym u exec i3-input -F 'unmark %s' -l 1 -P 'Unmark all: ', mode "default"

    # Read 1 char mark and go to the matching window
    bindsym g exec i3-input -F '[con_mark="%s"] focus' -l 1 -P 'Goto marked: ', mode "default"

    # Read 1 char mark and move the matching here
    bindsym f exec i3-input -F '[con_mark="%s"] move container to workspace current' -l 1 -P 'Fetch marked: ', mode "default"

    # Read 1 char mark and swap the current container with the marked one
    bindsym s exec i3-input -F 'swap container with mark "%s"' -l 1 -P 'Swap with marked: ', mode "default"

    # back to normal: Enter or Escape
    bindsym Return mode "default"
    bindsym Escape mode "default"
}
# T for Tag, M was taken
bindsym $mod+t mode "$mode_mark"

# resize window (you can also use the mouse for that)
set $mode_resize Resize: jkl; or arrows (enter or escape to close)
# set $resize_size 10 px or 10 ppt
set $resize_size 160 px
mode "$mode_resize" {
    # Pressing left will shrink the window’s width.
    # Pressing right will grow the window’s width.
    # Pressing up will shrink the window’s height.
    # Pressing down will grow the window’s height.
    # (jkl;)
    bindcode 44 resize shrink width 160 px
    bindcode 45 resize grow height 160 px
    bindcode 46 resize shrink height 160 px
    bindcode 47 resize grow width 160 px

    # same bindings, but for the arrow keys
    bindcode 113 resize shrink width 10 px or 10 ppt
    bindcode 116 resize grow height 10 px or 10 ppt
    bindcode 111 resize shrink height 10 px or 10 ppt
    bindcode 114 resize grow width 10 px or 10 ppt

    # TODO: Document this, maybe swap shift here and above
    # Pressing left will shrink the window’s width.
    # Pressing right will grow the window’s width.
    # Pressing up will shrink the window’s height.
    # Pressing down will grow the window’s height.
    # (jkl;)
    bindcode Shift+44 resize grow left 160 px
    bindcode Shift+45 resize shrink left 160 px
    bindcode Shift+46 resize shrink right 160 px
    bindcode Shift+47 resize grow right 160 px

    # back to normal: Enter or Escape
    bindsym Return mode "default"
    bindsym Escape mode "default"
}

# move floating windows
set $mode_move Move: jkl; or arrows (enter or escape to close)
mode "$mode_move" {
    bindsym $mod+Tab focus right
    bindsym $mod+Shift+Tab focus left

    # (jkl;)
    bindcode 44 move left
    bindcode 45 move right
    bindcode 46 move up
    bindcode 47 move down

    # same bindings, but for the arrow keys
    bindcode 113 move left
    bindcode 116 move right
    bindcode 111 move up
    bindcode 114 move down

    # back to normal: Enter or Escape
    bindsym Return mode "default"
    bindsym Escape mode "default"
}

# Custom system actions mode
set $mode_system System: [l]ock, log[o]ut, [s]uspend, [h]ibernate, [r]eboot, [Shift+s] shutdown (enter or escape to close)
mode "$mode_system" {
    bindsym l exec --no-startup-id i3exit lock, mode "default"
    bindsym o exec --no-startup-id i3exit logout, mode "default"
    bindsym s exec --no-startup-id i3exit suspend, mode "default"
    bindsym h exec --no-startup-id i3exit hibernate, mode "default"
    bindsym r exec --no-startup-id i3exit reboot, mode "default"
    bindsym Shift+s exec --no-startup-id i3exit shutdown, mode "default"

    # back to normal: Enter or Escape
    bindsym Return mode "default"
    bindsym Escape mode "default"
}

# Custom display config mode
set $mode_display Display: [b]uiltin, [e]xternal, external [l]eft, external [r]ight, [h]ome external above, [d]ongle (enter or escape to close)
mode "$mode_display" {
    bindsym b exec --no-startup-id ${HOME}/.screenlayout/builtinonly.sh, mode "default"
    bindsym e exec --no-startup-id ${HOME}/.screenlayout/externalonly.sh, mode "default"
    bindsym l exec --no-startup-id ${HOME}/.screenlayout/externalleft.sh, mode "default"
    bindsym r exec --no-startup-id ${HOME}/.screenlayout/externalright.sh, mode "default"
    bindsym h exec --no-startup-id ${HOME}/.screenlayout/home-external-above.sh, mode "default"
    bindsym d exec --no-startup-id ${HOME}/.screenlayout/dongle.sh, mode "default"

    # back to normal: Enter or Escape
    bindsym Return mode "default"
    bindsym Escape mode "default"
}

# Chrome profile launcher mode
set $mode_chrome Chrome profile: [M]artin, [X]AL, [V]ipps
mode "$mode_chrome" {
    bindsym x exec google-chrome --profile-directory="Default", mode "default"
    bindsym v exec google-chrome --profile-directory="Profile 1", mode "default"
    bindsym m exec google-chrome --profile-directory="Profile 2", mode "default"

    bindsym Shift+x exec google-chrome --profile-directory="Default"
    bindsym Shift+v exec google-chrome --profile-directory="Profile 1"
    bindsym Shift+m exec google-chrome --profile-directory="Profile 2"

    # back to normal: Enter or Escape
    bindsym Return mode "default"
    bindsym Escape mode "default"
}

# Custom launcher mode
set $mode_quicklaunch Quicklaunch: [c]hrome, [f]irefox, [g]oland, [d]atagrip, [s]lack, [k]eybase (enter or escape to close)
mode "$mode_quicklaunch" {
    bindsym c mode "$mode_chrome"
    bindsym f exec firefox, mode "default"
    bindsym i exec --no-startup-id idea, mode "default"
    bindsym g exec --no-startup-id goland, mode "default"
    bindsym d exec --no-startup-id datagrip, mode "default"
    bindsym s exec --no-startup-id slack, mode "default"
    bindsym k exec keybase, mode "default"

    # back to normal: Enter or Escape
    bindsym Return mode "default"
    bindsym Escape mode "default"
}

# Volume mode
set $AUDSINK 0
set $AUDSRC 1
set $mode_volume Mic volume 0%-100% = [qwert] | -+6dB = [ui] | mute/unmute= [op] | Speaker 0-100% = [asdfg] | -+6dB = [jk] | mute/unmute = [l;] (enter or escape to close)
mode "$mode_volume" {

    bindsym z exec --no-startup-id "notify-send $AUDSINK"
    bindsym x exec --no-startup-id "notify-send $AUDSINK"

    # Set sink volume (mic)
    bindsym a exec --no-startup-id "pactl set-sink-volume $AUDSINK 0%"
    bindsym s exec --no-startup-id "pactl set-sink-volume $AUDSINK 25%"
    bindsym d exec --no-startup-id "pactl set-sink-volume $AUDSINK 50%"
    bindsym f exec --no-startup-id "pactl set-sink-volume $AUDSINK 75%"
    bindsym g exec --no-startup-id "pactl set-sink-volume $AUDSINK 100%"

    # Adjust sink volume (mic)
    bindsym j exec --no-startup-id "pactl set-sink-volume $AUDSINK -6dB"
    bindsym k exec --no-startup-id "pactl set-sink-volume $AUDSINK +6dB"

    # Switch sink mute state (mic) (47=; on us layout)
    bindsym l exec --no-startup-id "pactl set-sink-mute $AUDSINK true"
    bindcode 47 exec --no-startup-id "pactl set-sink-mute $AUDSINK false"

    # Set source volume (mic)
    bindsym q exec --no-startup-id "pactl set-source-volume $AUDSRC 0%"
    bindsym w exec --no-startup-id "pactl set-source-volume $AUDSRC 25%"
    bindsym e exec --no-startup-id "pactl set-source-volume $AUDSRC 50%"
    bindsym r exec --no-startup-id "pactl set-source-volume $AUDSRC 75%"
    bindsym t exec --no-startup-id "pactl set-source-volume $AUDSRC 100%"

    # Adjust source volume (mic)
    bindsym u exec --no-startup-id "pactl set-source-volume $AUDSRC -6dB"
    bindsym i exec --no-startup-id "pactl set-source-volume $AUDSRC +6dB"

    # Switch source mute state (mic)
    bindsym o exec --no-startup-id "pactl set-source-mute $AUDSRC true"
    bindsym p exec --no-startup-id "pactl set-source-mute $AUDSRC false"

    # back to normal: Enter or Escape
    bindsym Return mode "default"
    bindsym Escape mode "default"
}

# Backlight mode
set $EXTOUT HDMI-2
set $INTOUT eDP-1
set $mode_backlight Laptop backlight = [asdfgqwert] | HDMI backlight = [hjkl;yuiop] (enter or escape to close)
mode "$mode_backlight" {
    # External screen
    bindsym q exec --no-startup-id   "xrandr --output $EXTOUT --brightness 0.1"
    bindsym w exec --no-startup-id   "xrandr --output $EXTOUT --brightness 0.2"
    bindsym e exec --no-startup-id   "xrandr --output $EXTOUT --brightness 0.3"
    bindsym r exec --no-startup-id   "xrandr --output $EXTOUT --brightness 0.4"
    bindsym t exec --no-startup-id   "xrandr --output $EXTOUT --brightness 0.5"
    bindsym y exec --no-startup-id   "xrandr --output $EXTOUT --brightness 0.6"
    bindsym u exec --no-startup-id   "xrandr --output $EXTOUT --brightness 0.7"
    bindsym i exec --no-startup-id   "xrandr --output $EXTOUT --brightness 0.8"
    bindsym o exec --no-startup-id   "xrandr --output $EXTOUT --brightness 0.9"
    bindsym p exec --no-startup-id   "xrandr --output $EXTOUT --brightness 1.0"

    # Laptop screen
    bindsym a   exec --no-startup-id "xrandr --output $INTOUT --brightness 0.1"
    bindsym s   exec --no-startup-id "xrandr --output $INTOUT --brightness 0.2"
    bindsym d   exec --no-startup-id "xrandr --output $INTOUT --brightness 0.3"
    bindsym f   exec --no-startup-id "xrandr --output $INTOUT --brightness 0.4"
    bindsym g   exec --no-startup-id "xrandr --output $INTOUT --brightness 0.5"
    bindsym h   exec --no-startup-id "xrandr --output $INTOUT --brightness 0.6"
    bindsym j   exec --no-startup-id "xrandr --output $INTOUT --brightness 0.7"
    bindsym k   exec --no-startup-id "xrandr --output $INTOUT --brightness 0.8"
    bindsym l   exec --no-startup-id "xrandr --output $INTOUT --brightness 0.9"
    bindcode 47 exec --no-startup-id "xrandr --output $INTOUT --brightness 1.0"

    # back to normal: Enter or Escape
    bindsym Return mode "default"
    bindsym Escape mode "default"
}

# Keyboard layout mode
set $mode_keyboard Keyboard layout = [N]O, [U]S, [D]ual (enter or escape to close)
mode "$mode_keyboard" {
    bindsym n exec --no-startup-id i3xkb-no , mode "default"
    bindsym u exec --no-startup-id i3xkb-us , mode "default"
    bindsym d exec --no-startup-id i3xkb-dual , mode "default"

    # back to normal: Enter or Escape
    bindsym Return mode "default"
    bindsym Escape mode "default"
}

# Supermode, top level menu
set $mode_top Modes: [L]auncher, [S]ystem, [D]isplay, [B]acklight, [V]olume, [K]eyboard, [T]ags, [W]orkspaces (enter or escape to close)
mode "$mode_top" {
    bindsym l mode "$mode_quicklaunch"
    bindsym s mode "$mode_system"
    bindsym d mode "$mode_display"
    bindsym b mode "$mode_backlight"
    bindsym v mode "$mode_volume"
    bindsym k mode "$mode_keyboard"
    bindsym t mode "$mode_mark"
    bindsym w mode "$mode_workspaces"

    # back to normal: Enter or Escape
    bindsym Return mode "default"
    bindsym Escape mode "default"
}
# Top level menu
bindsym $mod+z mode "$mode_top"


# Deeplink shortcuts to modes
bindsym $mod+x mode "$mode_quicklaunch"
# f1=67
bindcode $mod+67 mode "$mode_system"
# f2=68
bindcode $mod+68 mode "$mode_display"
bindsym $mod+b mode "$mode_backlight"
bindsym $mod+u mode "$mode_volume"
bindsym $mod+y mode "$mode_keyboard"

# Shortcuts to other modes
bindsym $mod+r mode "$mode_resize"
bindsym $mod+m mode "$mode_move" focus floating
bindsym $mod+c mode "$mode_chrome"
# 22 = backspace
bindcode $mod+22 mode "$mode_ws"

# Deeplink to keyboard layouts
bindsym $mod+n exec --no-startup-id i3xkb-no , mode "default"
bindsym $mod+shift+n exec --no-startup-id i3xkb-us , mode "default"

# Pulse Audio controls
bindsym XF86AudioRaiseVolume exec --no-startup-id pactl -- set-sink-volume 0 +5% #increase sound volume
bindsym XF86AudioLowerVolume exec --no-startup-id pactl -- set-sink-volume 0 -5% #decrease sound volume
bindsym XF86AudioMute exec --no-startup-id pactl set-sink-mute 0 toggle # mute sound

# Sreen brightness controls
bindsym XF86MonBrightnessUp exec xbacklight -inc 20 # increase screen brightness
bindsym XF86MonBrightnessDown exec xbacklight -dec 20 # decrease screen brightness

# Assign to workspaces
assign [title=".*IDEA"] 1
assign [title=".*GoLand"] 1
assign [title=".*DataGrip"] 2
assign [title=".*Slack"] 3

# Default colors:
# class             border  backgr. text    indicator child_border
# client.focused      #4c7899 #285577 #ffffff #2e9ef4   #285577
# client.focused_inactive #333333 #5f676a #ffffff #484e50   #5f676a
# client.unfocused    #333333 #222222 #888888 #292d2e   #222222
# client.urgent       #2f343a #900000 #ffffff #900000   #900000
# client.placeholder      #000000 #0c0c0c #ffffff #000000   #0c0c0c
# client.background       #ffffff

# Custom colors:
# class             border  backgr. text    indicator child_border
# client.focused      #4c7899 #285577 #ffffff #2e9ef4   #285577
# client.focused_inactive #333333 #5f676a #ffffff #484e50   #5f676a
# client.unfocused    #333333 #222222 #888888 #292d2e   #222222
# client.urgent       #2f343a #900000 #ffffff #900000   #900000
# client.placeholder      #000000 #0c0c0c #ffffff #000000   #0c0c0c
# client.background       #ffffff

# Other custom config
no_focus [class="Slack"]
no_focus [class="slack"]
# no_focus [class="jetbrains-idea"]
# no_focus [class="sun-awt-X11-XDialogPeer"]

focus_follows_mouse no
workspace_auto_back_and_forth no

